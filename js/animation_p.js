// author: CoenJanssen.net

animation["p"] = function () {

    //this part of the function uses closure, to make this functions and variables private and run once
    var shapes = [];
    var head =[
        4,7,7.3495575,33.853925,15.564984,79.899895,23.1132,54.853197,6.827475,114.94569,27,102,19.095866,112.07863,6.0021942,140.67086,58.558286,166.25229,74.357254,179.58596,76.100413,156.92562,72,136,70.128009,73.372579,65.391966,62.936374,66.6622,79.0947,76,94,59.511862,116.4785,83.842525,112.85063,66.419611,121.66339,35.523104,96.304621,47.243337,97.121075,49.974107,79.495807,41.083886,76.821125,30.130925,65.989638,72.919796,37.616488,68.989148,43.815602,96,63,103.31072,130.60164,174.997,108.907,205,168,-73.86162,-36.28425,3.52142,6.86906,-0.22376,10.2059,19.23925,-13.74893,6.70546,29.15347,-48.46038,0.32,105,161,3.70115,16.86594,40.9819,4.40536,-47.00138,36.99412,-10.330645,15.59083,-7.874395,10.18139,-11.850507,2.32474,90.154845,205.25829,47.894893,224.62365,53,216,31.522458,187.26567,37.459762,212.38475,1.1711577,196.24229,3.9077523,271.98062,7.9517278,332.00273,3.5348819,405.88325,1.826013,474.33445,6,503,9.8462623,558.88434,8,580,17.376513,602.69137,21,603,28.170887,593.02987,26.874119,578.05069,12.582435,531.3125,14.391,518.918,21.885736,520.42489,34.711659,552.3726,27.279083,603.74925,10,627,33.426136,640,426.0711,639.70674,381.89347,632,232.909,633.23516,29.64057,-3.95086,124.18742,0.72067,45.71749,-7.72084,-16.26947,-12.45898,9.28937,-38.54015,-58.58261,-38.44019,-76.11414,-21.04531,-30.29016,-19.71616,1.14941,-18.92059,-13.08828,-20.40285,37.02213,11.75907,-41.73076,-19.18069,-23.61867,5.51645,124,403,159.57025,395.694,178,412,37.27766,-47.86193,0.54468,-2.9974,6.7869,-14.18688,215,349,188.97143,368.40242,205,347,41.47976,-25.09156,5.51924,15.37756,32.37575,70.64375,-6.3183,14.71447,320,445,337.30042,457.02441,377.977,488.83079,430,529,419.23445,519.38102,424.2424,499.86977,431.80636,462.88483,414,449,428,421,427.40605,416.70406,427,391,432.13364,370.64681,427,373,-21.19665,13.19665,6.23803,-1.3707,-12.40713,10.35592,-7.78095,7.00273,-20.44514,3.80581,15.29797,-15.23764,-2.85369,-3.16561,-8.46276,-1.88044,432,359,-7,-7,8.44274,-93.24992,-7.19868,-79.28011,432,154,432,28,410.16866,5.4190328,317.5746,2.7454288,224.40062,3.6059009,125,6,65.829504,-1.8175688,177,0,-9.36225,7.250509,40,2,210,1,50,20,33.125767,18.703495,175,-7,-3.3196,7,90,19,69.739738,15.7188,-13,1,340,0,148,22,137.05358,39.473211,263,48,259.10337,34.818112,62,30,135,2,187,10,15,-10,-298,1,-0.88464,19.44685,26,13,20,0,-6.82887,7.164012,-10,3,217,2,-65,13,-5,-7,129,60,117,74,123.06427,95.489289,120,107,129.14222,112.17975,135,112,179.96158,92.315253,129.40263,121.0425,-6.94018,-57.643519,3.05471,-1.684442,97,8,-55,1.3333,17,70,220,9,-64,1,296.667,73.6667,113,74,-1,4,24,77,274,0,-2.25378,10.723534,-138,7,-23.74938,8.152051,43,2,-178,0,2.8469,14.84328,63,0,198,11,-1.92242,3.39187,-0.27501,-1.747378,-90,-7,-6.49311,-1.623277,17,4,127,0,8.67225,9.10713,-87,14,8.63929,1.74224,264,119,-2,12.833,-39.83215,9.08307,1.35859,4.57512,238,153,-10.80623,15.02834,3.74556,11.96034,28.57979,11.64744,-5.71192,-4.10399,-2.83908,-5.86376,9.42116,-14.36301,40.25761,-31.42278,303,118,1,28,-8.69611,36.95298,303,193,294.04062,218.04063,294,213,293.75413,204.67106,275.2855,210.20388,266,209,8.30536,5.38928,3.7683,13.1104,-27.79894,-4.87309,222.40656,177.92133,215,124,-11.34896,-4.60934,15.8701,-13.63424,4.72548,-9.653416,60,98,27,2,-0.539872,3.61584,100,4,38,-3,-19,2,131,3,16.07013,28.20261,-42.74154,47.18675,-4.38934,-5.82924,14.04316,-14.56334,21.05073,-21.28485,1.36711,-15.02805,-4.32312,-15.22563,-0.84658,-1.49869,-269,4,332,1,-373,1,-7.399725,8.51638,3.490837,-4.91018,3,0,103.667,0.333,41,115,-2.200851,5.66808,246,6,-12,1.333,262,129,109,-3,-144,4,133,-3,-328,1,118,1,60,4,-51,-3,51.19553,60.60514,-48.16197,-13.1346,234.667,1.667,16,133,6,0,-4,2,257,4,92,-3,3,0,-166,2,72,8,-25.5875,13.96787,-10.61075,-3.64624,28.49819,-14.37402,92,-3,-144.333,1.667,-16.334,2,366,144,-1,1,21,1.333,215,147,1,1,138,0.333,-304.3333,1.334,178.0003,2.666,271,159,3.58153,-2.27331,24,-5,57,-1.667,418,153,-178,6,28,2,1,1,145,1,-152,6,1.00425,-0.60255,58,-1,1,1,-48,4,19,1,-47,-1,23,3,-217,-1,9.036176,3.2204,55,0.333,317.5,173.5,251,174,93.667,0.667,9,9,151,188,213.89428,208.35758,149,220,159.06025,199.58062,-1,8,-15.07075,2.10933,-2.32755,-6.45644,2,2.333,248,204,15,-2,-152,-2.667,192.667,0,21,200,134,1.333,147,204,103,3,-85,-1,-25.58095,7.39199,82,7,-116,-3,126,3,135,211.333,200,214,18,-1,-35,3.333,17,0.667,-4,1,12,0,4,0.333,54,218,184,4,6.77837,64.17094,-30.7594,6.72864,-92.98121,88.0702,134,378,-32.88221,24.51937,30.06938,2.49214,72.15491,46.45854,4.22155,3.41083,17.95979,4.32142,228,469,43.82748,36.93172,-17.05518,60.78348,-9.79638,13.27083,0.0241,14.01397,-8.4755,16.00088,-1.5535,-58.93663,209.50002,515.833,173.61794,451.28913,121.8605,421.42024,111.52402,437.247,126.30037,465.10845,87.356315,447.61302,78.86807,436.85718,72.526462,418.49119,80.564775,401.06858,75.9848,401.56166,67.095753,411.8585,53.707624,413.1384,44,406,43,384,32,407,61.752122,435.88103,65.061805,444.29734,70,451,65.82021,26.44576,27.32014,8.12836,61.66377,69.1935,215,561,-44.25989,17.77966,-2.97973,18.81771,-6.06461,-22.57565,-49.11277,1.08928,-29.08015,-51.2535,17.68928,-5.40475,-9.15608,21.41487,12.87993,-23.51678,107,485,87.276778,471.66067,82.27905,495.6335,69.875728,556.53943,48,527,56.134406,497.09162,44.724348,455.61378,52,443,41.476359,426.41444,29,418,-9.510083,3.37498,14.348833,-46.6701,7.501128,-4.27158,3.521066,1.53048,3.096268,-24.2174,54,346,59,336,67.96554,329.76579,138,280.833,144.62922,257.75779,97.396987,279.04825,114.54636,224.46645,176,221,-0.62116,11.64317,8,-1,-145,1,315.667,3.667,18,242.333,248,242,55,0,-5,3,17,3,-8,2,-23.08392,14.43788,10.76669,0.82292,18.06685,-5.83343,327,262,349.02059,260.66753,324.90813,275.3685,312,281,277.52984,293.89542,272,248,7,7,-7,3,-250,6,-40,-2,220,6,0.57587,11.45825,-0.82442,-5.91306,-219,2,5.628818,12.26777,125,3,-1,1,141,6,8,15,17.24522,-14.06386,270,269,259.9723,313.24029,268,269,1.55327,0,32,4,55,9,-5.26463,10.54975,5.55343,9.46433,-53.81603,29.60365,4.91143,4.87811,307.70987,316.2985,330,300,347.73267,285.95255,-278,5,170,0,-4.44775,12.25575,-210,1,314.667,0.333,28,290,274,8.333,10,-0.333,-1,1,-5,3,-12.1295,6.81538,31,3,-9,4,-2,1,1,1,-7,3,52,-1,-5,2,-55.333,2.333,322,316,78,315,198,1,-196,2,-1,1,210,0,-48,1,-1,1,134,1,-14.13387,4.44088,-77,5,89,-4,-132,3,-9.99213,2.39112,4.82221,-1.96107,-61,1,190,0,0.71705,6.18747,-24.61872,24.7142,357,346,376.71634,329.39439,-91.333,1.333,407,328,-147,2.333,178,332,83,0,-4,2,84,0,192,333,176.19261,368.27703,172,369,30,5,49,-2,-51.667,1.667,324,340,-19,1,23.84626,16.88434,1.22607,9.92139,342,387,352.97383,393.42936,359,397,-8.50881,7.47356,7.50969,3.62519,-35.09289,-37.68851,-24,3,80,7,-194,-5,153,0,-1,1,-23,4,-136.333,4.667,320,356,60,3,-10.1935,-2.463,-364,-1,-8,2,323,0,-4,2,44.6667,359.667,210,359,134,1,28,0,-5,3,-215,1,-1.2924,3.8616,225,1,5.80094,16.95475,-17.17166,3.89871,5.06491,-12.19121,-9,1,42,5,-68,-3,-1.74825,2.86725,-53,5,1,8,-10.22339,0.806,6.02351,-2.40612,1.5549,-3.12396,17,0,-159,1,151,5,109,1,1,1,-61,3,-326,3,294,-2,-137,2,195,5,-23,-3.667,325,387,56,7,13,4,20,0,-25.95283,10.30496,-83,2,67,2,-29.80763,23.17725,371,435,3,11,31.01378,-9.75345,-12.91618,20.05903,13.11465,12.63267,411,475,402.7432,484.56799,376.10345,474.31248,367,458,352.05595,421.81077,380.64969,407.13239,19,0,-111,3,27,0,97,0,-252,3,-1,1,-58,2,280,-1,-20.05813,10.72025,-322.5,1.5,218.5,0.5,-1,1,96.667,2.333,310,417,7,7,-8.9525,0.77312,0.20516,-3.95064,25,1,-6,5,17,434,345,-10,36,-2,-5,4,-321,2,316.667,0.333,344,425,31,2,-8,1.333,47,432,1,1,336,0.333,424,434,-39,5,84,436,265,0,55.3333,437.667,414,437,2.667,0.667,25,440,51,4,263,4,157.667,443.667,203,443.333,-139.3333,2,173.0003,3,25,449,339,1.333,106,460,-3.84886,-1.70361,38,-4,-1,1,127,0,1,1,-246,3,247,0,1,1,140,5,268.667,462.667,58,464,44.235113,477.35238,157.5,0.5,17,465,217,0,194,3,-372,3,369,2,91,472,56,0,247,2,67.3333,478.667,256,487,-114,-5,-42,3,327,5,-8.24525,-4.60913,-318,-4,-84,10,13,-8,113,4,271,-3,-309,2,16,6,8,493,113,1,149,1.333,-15,2,-6,2,167.5,3.167,7.5,1.5,1,1,-257,10,24.53623,3.75183,-27,24,4.09661,-6.46817,156,510,-9.19373,1.38733,291,-28,-16,4,-397,2,397,3,-1,1,-257.5,1.5,55.5,-0.5,11,13,80.667,4.667,170,533,149,-6,-26,0,-193,1,118.667,2.667,181,535,3.70316,-0.0185,113,-4,-206,1,134,1,-50,10,-1.29712,-4.51013,209,-1,-15.80613,-4.29225,48,-3,-206,-2,-47,2,146,3,-41,0,55,0,44,3,-8.10037,7.51297,-9.58188,-0.46634,-64.97075,20.00893,-16.05819,-15.39512,14.50839,3.96729,315,550,7.55327,1,1.22066,6.95361,27.2142,-4.76177,-1.93801,-10.2302,-225,3,45,-4,-12,3,29,546,125,7,247,4,-287,-6,179,-1.667,80.3333,550.667,202,550,112,0,-102.333,2.333,389,552,-106,1.333,150,554,227,0,-250,1,-15,1,278,3.333,409,564,-25,-3,31,24,-55.52748,-17.93997,-160,3,-12.06577,26.97639,-61.333,1.333,315,573,87,17,-31.48324,10.82542,296,608.185,247.78588,610.59275,248,600,40.79762,-22.02275,79.99984,7.13315,75,581,115,-4.667,60,577,-7,9,-13,1,133.667,0.667,73,584,-2.224638,2.33338,342,4,-230,10,-97,-5,8,5,35,25,-46,-5,18,-2,38.3475,12.26445,-86.321089,1.79459,-23.99422,-9.48522,27.863684,-4.4992,62,626,61.97502,-9.08242,4.4442,3.25165,-27,-18,120,3,99,1,-144,1,-84,6,90,0,17.79939,15.98513,-129,7,23,-5,15.6667,2.333,120,620,-38.3333,4.333,174,631,,256.5,0.5         
    ];
        
        
    function linePoint() {

    }

    function linePoint(x, y) {
        this.x = x;
        this.y = y;
    }

    linePoint.prototype = {
        x: 10,
        y: 10,
        speedX: 4,
        speedY: 4,
        update: function () {
            if (this.x + this.speedX > canvas.width || this.x + this.speedX < 0) this.speedX = -this.speedX
            if (this.y + this.speedY > canvas.height || this.y + this.speedY < 0) this.speedY = -this.speedY
        },
        moveX: function () { this.x += this.speedX },
        moveY: function () { this.y += this.speedY },
    }

    function initPoints() {
        var array = [];

        for (i=0; i< head.length; i+=2) {
            posX =head[i];
            posY =head[i+1]
            array.push(new linePoint(posX, posY));
        }

        return array;
    }

    function Shape() {
        this.linePoints = initPoints();
    }

    function Shape(fill, stroke, x, y, //linePoints
    ) {
        this.fill = fill;
        this.stroke = stroke;
        // this.linePoints = this.linePoints;
        this.x = x;
        this.y = y;
        this.linePoints = initPoints();
    }

    Shape.prototype = {
        linePoints: [],
        fill: 'blue',
        stroke: 'yellow',
        x: 10,
        y: 10,
    }


    function setup() {

        shape = new Shape(`rgba(254,0, 128, 0.5)`, 'blue', 0, 120);

        shapes.push(shape);
        
    }

    function clear() {
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function drawLines(point) {
        point.update();
        point.moveX();
        point.moveY();
        ctx.lineTo(point.x, point.y);
    }

    function drawBeziers(cp1, cp2, point) {
        point.update();
        point.moveX();
        point.moveY();
        ctx.bezierCurveTo(cp1.x, cp1.y, cp2.x, cp2.y, point.x, point.y);
    }
/*
    function draw(shape) {
        clear();
        ctx.beginPath();
        ctx.moveTo(shape.linePoints[0].x, shape.linePoints[0].y);
        o = shape;

        for(var i=0; i< o.linePoints.length-2; i+=3){

            drawBeziers(o.linePoints[i], o.linePoints[i+1], o.linePoints[i+2]);
        }
        
        ctx.closePath();

        ctx.fillStyle = shape.fill; //`rgba(0,128, 128, 0.5)`;
        ctx.strokeStyle = shape.stroke;
        ctx.stroke();
        ctx.fill();
    }
*/

    function draw(shape) {
        clear();
        ctx.beginPath();
        ctx.moveTo(shape.x, shape.y);
        o = shape;
        o.linePoints.forEach(drawLines);
        ctx.closePath();

        //ctx.fillStyle = shape.fill; //`rgba(0,128, 128, 0.5)`;
        ctx.strokeStyle = shape.stroke;
        ctx.stroke();
        ctx.fill();
    }
  
    function drawAll() {
        shapes.forEach(draw);
    }



    setup();
    
    // below is the only public part of the function
    return function () {           
        drawAll(shapes);
    }
}();

animation["p"].play=true;


// author: CoenJanssen.net

animation["v"] = function () {

    //this part of the function uses closure, to make this functions and variables private and run once
    var shapes = [];
    var path = [
        69.140366,264.56825,70.78497,253.65618999999998,72.28048199999999,243.28011999999998,
        71.90153099999999,232.24568,72.52158999999999,221.13403,74.74951499999999,210.28378999999998,
        77.16706299999998,201.59636999999998,84.30801799999999,194.39030999999997,83.01930699999998,184.89179,
        76.72141599999998,176.82924,78.40040999999998,166.20434999999998,76.37979099999998,156.84178999999997,
        70.16324699999998,150.75221999999997,65.36802599999999,142.69603999999998,55.42279399999998,149.27303999999998,
        48.083759999999984,154.97225999999998,44.95552599999998,144.18314999999998,39.401758999999984,152.72993999999997,
        36.027118999999985,153.96978999999996,51.624189999999984,143.63724999999997,41.624290999999985,144.44144999999997,
        35.67452799999999,146.98348999999996,29.852143999999985,147.58352999999997,38.572445999999985,143.89721999999998,
        43.31904999999998,141.97464999999997,53.50387999999998,146.89324999999997,49.597709999999985,137.03995999999998,
        50.75432099999998,130.18103,47.09409199999998,128.42593999999997,42.90171799999999,127.49481999999998,
        45.34823999999999,116.43581999999998,58.54110399999999,110.06463999999997,57.31679299999999,98.04179099999998,
        53.20237299999999,96.67208499999998,48.92804499999999,85.31884499999998,43.85728599999999,81.64558499999998,
        39.66788099999999,77.91837199999998,38.53869299999999,60.96906999999999,43.958255999999984,73.14545299999997,
        45.96062999999999,77.32520999999997,52.36521299999998,85.80076599999998,55.60820799999998,84.49051799999998,
        61.997134999999986,78.39539799999999,59.04567699999998,73.32388599999999,51.24801199999998,74.81127399999998,
        43.876659,71.2456,50.844449,57.802095,39.362739,57.560697,
        29.989329,57.310137,19.689272,50.385915,12.949048,59.151411,
        5.4601653,60.614759,3.2833919,57.12398,11.533635,56.50367,
        16.243928,49.956361,24.752447,50.976602,32.122658,54.078676,
        37.359151000000004,54.372917,41.168479000000005,57.725236,38.932913,49.519927,
        36.377667,44.797785,33.670465,48.777283,28.06455,47.567489,
        21.480477,45.778966,12.04079,53.442335,8.6534203,42.435203,
        5.6969825,37.900592,4.8562235,22.104783,7.5193277,35.613246,
        8.5799589,47.259975999999995,19.071077000000002,42.793474999999994,25.794254000000002,43.169951999999995,
        31.540593,44.705265,39.082262,41.869032999999995,39.408633,48.200897999999995,
        40.051050000000004,49.989408999999995,41.962499,60.078422999999994,47.948667,61.87457799999999,
        50.568106,68.66972999999999,51.687855,74.98344999999999,58.031793,72.421629,
        62.199512,71.68912499999999,60.63141,71.056598,63.012243,73.676253,
        70.558101,69.059629,66.69634599999999,72.141564,64.619038,75.16847200000001,
        69.488116,79.94482900000001,76.36358100000001,83.540316,75.33922700000001,73.04559700000001,
        79.458239,67.57831500000002,75.74158000000001,64.29151000000002,73.70750400000001,61.56933100000001,
        80.16146200000001,64.45418400000001,84.34611500000001,67.33309300000002,90.96028000000001,61.798510000000014,
        94.19452100000001,62.598483000000016,74.791672,69.22184500000002,85.93030800000001,70.38625700000001,
        95.03182800000002,75.25990900000002,93.820563,59.559919000000015,94.38602600000002,54.97266600000002,
        93.95614600000002,45.32291200000002,90.99663200000002,31.186169000000017,79.80348500000001,29.21930700000002,
        77.90089400000001,33.83912600000002,80.74124200000001,47.44582500000001,76.988983,34.84347600000002,
        77.118859,23.783591,66.62086,20.785382,58.409956,20.266791,
        48.503288,25.225933,43.278966,13.173874,37.239268,7.4108871,
        42.110251,6.3573067,47.737105,22.572382,55.601824,16.742222,
        59.171943,14.598887000000001,65.19153299999999,8.460298400000001,59.538991,15.334685000000002,
        57.235146,19.632417000000004,70.347187,18.873689000000002,73.345072,23.33273,
        77.61744,25.419442,89.737016,31.966141,81.252977,22.780149,
        80.473278,15.844797,62.711639,6.2104564,65.995153,4.1417911,
        74.28647600000001,4.9402633,80.374216,23.266171,86.580797,10.670894,
        89.253012,4.9195602,91.425798,1.4673683999999998,90.536215,10.361413,
        89.36775899999999,16.354827,81.02085199999999,22.238301,87.210765,27.511054,
        91.87366,41.893096,97.25914,21.662727,100.9785,16.913349000000004,
        101.29836999999999,10.845483000000003,106.69304,0.17463680000000537,111.62015,4.9185979000000035,
        110.27702,8.299784500000003,103.07042,15.523350000000004,112.43529,12.455827000000003,
        111.01089999999999,6.936938200000003,118.60835,-0.713955989999997,117.68897,7.998427800000003,
        114.30051,21.337996000000004,136.28235,5.761564800000002,132.13407999999998,19.028381000000003,
        131.81967999999998,23.894725,145.45373999999998,14.545283000000003,135.68142999999998,20.938860000000002,
        126.05519999999999,27.909304000000002,133.46294999999998,10.545925000000002,123.35149999999997,15.498123000000001,
        114.83878999999997,11.029662000000002,108.66847999999997,25.826465,102.81699999999998,21.431213,
        111.31229999999998,20.365108,109.95577999999998,11.782907999999999,103.53889999999998,18.123889,
        100.82661999999999,25.211043999999998,98.97432999999998,25.193870999999998,96.01200899999998,31.741791,
        93.48485299999997,36.969228,93.24911799999998,41.22549,94.95962099999998,44.641791,
        99.40917599999999,50.424124,99.18554199999998,56.899992,102.92946999999998,49.858464,
        98.48856799999999,58.658431,108.31092999999998,55.234282,110.44825999999998,54.944112,
        110.34382999999998,60.415807,92.63478699999997,56.225469999999994,97.21641899999997,64.51507699999999,
        93.92711599999997,72.77284499999999,100.90234999999997,76.73771099999999,101.62133999999998,84.360171,
        106.47982999999998,91.277884,96.63545699999997,83.65194299999999,99.87647599999997,79.46282699999999,
        89.23822299999996,84.04507399999999,93.82612299999997,99.11151899999999,90.47117499999997,108.09178999999999,
        87.35731799999998,114.07972999999998,86.04811999999997,121.44174999999998,93.44156499999997,113.69122999999999,
        99.32074999999998,110.862,107.27015999999998,97.62434199999998,108.56472999999997,110.95948999999999,
        114.84079999999997,112.43394999999998,101.08258999999997,117.69183999999998,110.10662999999997,118.44178999999998,
        113.38612999999997,123.37960999999999,122.27389999999997,114.24839999999999,125.16932999999997,119.80476999999998,
        134.54817999999997,124.01914999999998,151.79469999999998,114.89983999999998,154.36719999999997,129.61677999999998,
        164.30131999999998,131.27164999999997,173.42772999999997,120.05856999999997,183.64538999999996,117.78850999999997,
        188.34362999999996,115.43306999999997,192.63156999999995,115.61081999999998,185.27788999999996,118.62045999999998,
        178.80951999999996,120.21825999999999,162.92761999999996,129.03667,178.37254999999996,128.03049,
        183.20676999999995,129.80033999999998,190.63652999999996,112.42617999999999,193.06199999999995,118.85272999999998,
        185.94666999999995,121.96448999999998,181.07546999999997,129.47691999999998,190.28399999999996,132.64992999999998,
        195.36872999999997,140.62994999999998,182.86334999999997,128.14605999999998,179.14033999999995,132.15985999999998,
        170.97180999999995,130.05349999999999,159.72251999999995,129.71961,156.62042999999994,136.27187999999998,
        164.72975999999994,134.48548,161.44333999999995,140.19509,155.72013999999993,139.29178,
        158.53696999999994,150.83928999999998,138.57564999999994,137.80552,145.71419999999992,149.57371999999998,
        150.0314999999999,156.34029999999998,160.73156999999992,141.74397,163.26531999999992,149.20162,
        155.5952599999999,147.71437,144.82274999999993,160.52997,142.29927999999992,146.27786,
        144.11235999999994,136.16091,123.90494999999993,127.23599,125.57021999999992,142.41674,
        122.37999999999992,156.89063000000002,114.59916999999992,134.91083,110.16355999999992,131.18358,
        103.87764999999992,131.32748,90.89163899999991,145.70786,88.12398599999992,138.6269,
        95.09132399999991,133.66991000000002,105.39320999999993,127.86479,108.89351999999991,121.5882,
        98.41244699999991,118.5925,89.48299599999991,128.54926,85.97017099999991,136.76201,
        87.69752999999992,138.28044,86.0280009999999,143.03644,90.0532779999999,144.51734,
        92.98125799999991,151.43070999999998,86.2237239999999,159.09038999999999,88.44517399999991,162.17951,
        89.11238299999991,165.92854,95.20873399999991,178.42481999999998,93.0886329999999,178.52673,
        96.8261019999999,180.56605,105.9926199999999,171.27338999999998,98.5157929999999,166.19126,
        93.32314599999991,162.63876,87.7252679999999,159.8307,95.3029459999999,157.99348,
        98.4810579999999,152.86627000000001,111.38692999999991,143.17475000000002,101.06544999999991,153.69867,
        89.46839099999991,164.81762999999998,115.47719999999991,147.0206,104.72683999999991,157.15357,
        104.04322999999991,164.03272,90.23105499999991,160.436,101.6907399999999,163.74971,
        102.6713899999999,167.48415,104.9980799999999,176.07482,108.55083999999991,169.62171,
        100.02730999999991,164.37696,109.81704999999991,156.50041000000002,111.87725999999991,165.74109,
        110.5152699999999,173.60529000000002,124.78624999999991,169.06701,129.4701699999999,173.43401,
        128.2399599999999,170.39827,119.82149999999992,162.96686,126.17016999999991,166.93633,
        122.82639999999991,164.83652,112.86490999999991,152.32457,121.54846999999991,161.01923,
        125.57487999999991,168.20077,127.69012999999991,157.7397,128.5194899999999,167.74662,
        133.7145199999999,175.4446,122.6301899999999,145.76365,129.5229799999999,161.40571,
        129.4154399999999,168.28748,134.9663899999999,179.60521,135.6624999999999,166.67693,
        141.1148799999999,160.90804,127.0221799999999,158.27367,137.5747599999999,159.01683,
        139.63200999999992,158.21682,152.3848099999999,168.72056,154.8437999999999,158.22550999999999,
        157.65042999999991,154.98502,168.5414199999999,149.32100999999997,161.2293299999999,157.08589999999998,
        156.9897299999999,161.7959,152.6962999999999,166.38235999999998,162.1683899999999,163.55089999999998,
        167.2573299999999,162.7575,184.9422099999999,166.61442,171.8908399999999,169.80052999999998,
        161.29710999999992,172.00090999999998,149.79199999999992,171.2985,139.99999999999991,175.98063,
        136.4418799999999,177.66777,125.57362999999991,182.95107,119.09122999999991,176.54622999999998,
        112.23920999999991,171.89036,106.31637999999991,180.81821999999997,101.49108999999991,184.61541999999997,
        94.35936799999992,188.49354999999997,100.02307999999991,197.75722999999996,96.09029999999991,203.90713999999997,
        89.90275899999992,214.84533999999996,94.17272399999992,228.12676999999996,89.47800799999992,239.54614999999995,
        83.31455999999991,249.05355999999995,96.02351599999992,261.32969999999995,87.62457399999991,269.49182999999994,
        83.77553199999991,275.76415999999995,76.41732299999991,264.9895199999999,72.2789289999999,273.50336999999996,
        70.98325199999991,274.06158999999997,69.29941999999991,275.80434999999994,67.84157899999991,274.57035999999994,
        73.851996,134.44589000000005,75.119849,124.28871000000007,76.685103,112.49880000000006,
        77.651775,103.45645000000006,79.706186,97.19353200000006,69.770149,93.03571800000006,
        65.93525,85.59084600000006,55.443628000000004,89.61742400000006,61.434029,96.92897900000006,
        67.04399000000001,108.96895000000005,47.892214,114.77032000000005,52.782515000000004,124.57101000000006,
        50.45781100000001,128.77691000000004,52.255171000000004,145.86083000000005,56.35313300000001,134.35739000000007,
        59.31809400000001,130.62942000000007,64.095809,117.41583000000007,60.43027300000001,129.89878000000007,
        57.207263000000005,135.09847000000008,50.286354,149.16767000000007,59.02270800000001,137.70548000000008,
        61.58765600000001,133.99627000000007,70.91442400000001,126.99429000000008,64.71553,135.93978000000007,
        59.978215,140.08807000000007,56.187137,144.59040000000007,65.029062,141.10385000000008,
        70.81777199999999,135.93332000000007,76.88466199999999,162.52451000000008,76.541336,145.9667900000001,
        123.00218,126.41032000000006,137.8217,134.96763000000007,145.27160999999998,138.35498000000007,
        150.44247,136.05081000000007,160.47494999999998,132.68998000000008,150.72340999999997,128.66298000000006,
        148.85366999999997,118.17813000000007,133.46195999999998,127.99144000000007,125.71402999999998,123.72407000000007,
        119.28398999999997,118.65673000000007,104.84720999999998,130.31990000000008,116.64428999999998,134.56755000000007,
        119.77350999999999,134.88194000000007,122.37687999999999,146.23079000000007,123.82849999999999,142.66566000000006,
        159.89695999999998,131.24559000000005,134.95327999999998,142.64682000000005,149.18653999999998,143.17564000000004,
        150.56289999999998,143.18744000000004,152.06449999999998,144.02347000000003,153.41015,143.28179000000006,
        101.47452000000001,104.55481,115.99965000000002,92.991848,108.13090000000001,89.55250500000001,
        105.32356000000001,90.32441000000001,102.76986000000001,87.215906,107.33304000000001,88.54877800000001,
        114.21801,88.40669100000001,114.92528000000001,93.27070700000002,114.02526000000002,97.88809100000002,
        123.97620000000002,94.51436100000002,137.81884000000002,85.10978700000001,127.27544000000002,74.38325200000001,
        127.26074000000001,62.34765100000001,130.82702,88.00876300000002,131.54889000000003,74.51182900000002,
        131.48259000000002,69.46948700000002,132.73712000000003,64.17711300000002,128.36875000000003,61.74839100000002,
        121.07834000000004,58.79442500000002,123.63119000000003,48.267186000000024,123.93736000000004,42.81378600000002,
        118.47505000000004,38.680291000000025,107.28087000000004,34.941183000000024,102.66952000000003,42.99019200000002,
        102.63052000000003,28.18345900000002,121.96956000000003,44.788701000000025,125.58128000000004,37.54831800000002,
        126.40340000000003,29.514800000000022,139.18907000000004,38.11353700000002,129.41118000000003,35.448787000000024,
        122.44940000000003,39.91906900000002,130.27412000000004,56.17366500000003,135.39665000000002,44.791791000000025,
        141.42132000000004,38.79835000000003,139.30818000000002,28.624404000000023,142.38934000000003,21.687176000000026,
        138.58979000000002,17.706047000000027,139.09555000000003,8.490862000000027,143.65501000000003,5.276754300000025,
        146.80867000000003,8.227265500000025,142.20217000000002,17.056787000000025,149.91207000000003,10.329227000000024,
        154.46403000000004,7.137175700000024,163.60490000000004,0.9109343800000236,154.15489000000002,8.678819300000024,
        146.61678000000003,10.913917000000023,142.22338000000002,21.425150000000023,152.84119,20.136861000000025,
        159.06447,17.839865000000025,166.81312000000003,12.166071000000024,172.86776,13.370436000000025,
        166.73201,23.900262000000026,149.13993,18.732798000000024,142.70831,26.405205000000024,
        143.39771000000002,35.52166400000002,140.42698000000001,43.858391000000026,134.48723,50.07897000000003,
        146.97315,54.86273000000003,154.96597,39.61869000000003,164.25341,35.32515600000003,
        162.52572,44.275595000000024,149.92941,49.525876000000025,146.83658,54.76196500000003,
        154.33343,54.699385000000035,155.71943,60.21155900000003,160.29349,64.02739100000004,
        168.84049,62.610467000000035,176.84309,61.64081600000004,185.72857,58.36655600000004,
        189.15447,59.54986000000004,178.63151,65.74437000000003,172.06996999999998,66.42978800000003,
        164.91033,66.65283900000003,145.68212,72.96438400000002,158.31813,79.54638800000004,
        166.12417,84.69198300000004,157.36146,83.08298700000003,154.06823,80.56678700000003,
        152.47234,85.93312600000003,160.33117,95.81231600000004,152.50893,86.56936900000004,
        155.31556999999998,84.07817300000004,150.02724,74.35890100000003,145.40024,82.96162700000004,
        138.33892,85.51342700000004,129.83583,95.53055200000003,142.64611,95.54906700000004,
        147.71062999999998,101.96720000000003,131.94686,91.79956500000003,129.47002,98.81001200000004,
        123.53462,104.03768000000004,114.1254,101.52218000000005,111.7234,109.26248000000004
    ];


    function linePoint() {

    }

    function linePoint(x, y) {
        this.x = x;
        this.y = y;
    }

    linePoint.prototype = {
        x: 10,
        y: 10,
        speedX: 4,
        speedY: 4,
        update: function () {
            if (this.x + this.speedX > canvas.width || this.x + this.speedX < 0) this.speedX = -this.speedX
            if (this.y + this.speedY > canvas.height || this.y + this.speedY < 0) this.speedY = -this.speedY
        },
        moveX: function () { this.x += this.speedX },
        moveY: function () { this.y += this.speedY },
    }

    function initPoints() {
        var array = [];

        for (i = 0; i < path.length; i += 2) {
            posX = path[i];
            posY = path[i + 1]
            array.push(new linePoint(posX, posY));
        }

        return array;
    }

    function Shape() {
        this.linePoints = initPoints();
    }

    function Shape(fillStyle, stroke, lineWidth, x, y, //linePoints
    ) {
        this.fillStyle = fillStyle;
        this.stroke = stroke;
        this.lineWidth = lineWidth;
        // this.linePoints = this.linePoints;
        this.x = x;
        this.y = y;
        this.linePoints = initPoints();
    }

    Shape.prototype = {
        linePoints: [],
        fillStyle: 'blue',
        stroke: 'yellow',
        x: 10,
        y: 10,
    }


    function setup() {

        shape = new Shape(`rgba(1,0, 0, 1)`, 'black', 5, 0, 120);

        shapes.push(shape);

    }


    function drawLines(point) {
        point.update();
        point.moveX();
        point.moveY();
        ctx.lineTo(point.x, point.y);
    }

    function drawBeziers(cp1, cp2, point, show) {
        /*
         point.update();
         point.moveX();
         point.moveY();
         cp1.update();
         cp1.moveX();
         cp1.moveY();
         cp2.update();
         cp2.moveX();
         cp2.moveY();
 */
        if (show) {
            ctx.bezierCurveTo(cp1.x, cp1.y, cp2.x, cp2.y, point.x, point.y);
        }
    }

    function draw(shape) {
        o = shape;
        var show = false;
        var step = 0;
        var modulo = 1;
        dropPoints += .1;
        if (dropPoints > 48) dropPoints = 1;
        ctx.beginPath();
        ctx.moveTo(shape.linePoints[0].x, shape.linePoints[0].y);
        for (var i = 0; i < o.linePoints.length - 2; i += 3) {
            step = Math.round(dropPoints) * 3;
            modulo = i % step;


            drawBeziers(o.linePoints[i], o.linePoints[i + 1], o.linePoints[i + 2], !modulo);
        }

        ctx.closePath();

        ctx.fillStyle = shape.fill; //`rgba(0,128, 128, 0.5)`;
        ctx.strokeStyle = shape.strokeStyle;
        ctx.fillStyle = shape.fillStyle;
        ctx.lineWidth = ctx.lineWidth;
        ctx.stroke();
        ctx.fill();
    }

    /*
        function draw(shape) {
            
            ctx.beginPath();
            ctx.moveTo(shape.linePoints[0], shape.linePoints[1]);
            shape.linePoints.forEach(drawLines);
            ctx.closePath();
    
            //ctx.fillStyle = shape.fill; //`rgba(0,128, 128, 0.5)`;
            ctx.strokeStyle = shape.stroke;
            ctx.fillStyle=shape.fillStyle;
            ctx.lineWidth=shape.lineWidth;
            ctx.stroke();
            ctx.fill();
        }
      */
    function drawAll() {
        shapes.forEach(draw);
    }



    setup();

    // below is the only public part of the function
    return function () {
        drawAll(shapes);
    }
}();

animation["v"].play = true;

